<html>
<head>
<link rel="stylesheet" type="text/css" href="Style.css">
<title>DJV</title>
</head>
<body>

<div class="header">
<div class="row">
	<div><a class="image" href="index.html"><img src="images/djv-logo-small.png" align="left"></a></div>
</div>
</div>

<div class="content">

	<div class="textSmall"><a class="text" href="index.html">Home</a> | <a class="text" href="Documentation.html">Documentation</a> | Building on Windows</div>

	<div class="column" style="margin: 3em 0 0 0">
		<div class="textLarge">Building on Windows</div>
		<div class="textSmall" style="margin: 1em 0 0 0">
		<ul>
		    <li><a class="text" href="#BuildingFFmpeg">Building FFmpeg</a></li>
		    <li><a class="text" href="#BuildingTheSourceCode">Building the Source Code</a></li>
		    <li><a class="text" href="#Packaging">Packaging</a></li>
		</ul>
		</div>
	</div>

	<div class="column" style="margin: 3em 0 0 0">
		<div class="textLarge"><a name="BuildingFFmpeg">Building FFmpeg</a></div>
		<div class="textSmall" style="margin: 2em 0 0 0">Building FFmpeg on Windows for DJV is accomplished
		with the Windows Subsystem for Linux.</div>
		<div class="textSmall" style="margin: .5em 0 0 0">First enable the Windows Subsystem for Linux:</div>
		<div class="textSmall">
		<ul>
			<li>Open the Windows control panel and click on "Programs and Features"</li>
			<li>Click on "Turn Windows features on or off" on the left side of the "Programs and Features" window</li>
			<li>Check the "Windows Subsystem for Linux" item in the "Windows Features" window</li>
			<li>Restart your computer</li>
			<li>Install Ubuntu from the Windows app store</li>
		</ul>
		</div>
		<div class="textSmall">Start an Ubuntu shell and setup the environment:</div>
		<pre>
> sudo apt update
> sudo apt install mingw-w64 yasm make unzip</pre>
		<div class="textSmall">Build FFmpeg:</div>
		<pre>
> ./configure \
      --disable-programs \
      --disable-doc \
      --disable-bzlib \
      --disable-iconv \
      --disable-lzma \
      --enable-pic \
      --arch=x86_64 \
      --cross-prefix=x86_64-w64-mingw32- \
      --target-os=mingw32 \
      --enable-cross-compile \
      --prefix=$CMAKE_BINARY_DIR\install \
      --enable-shared
> make
> make install</pre>
	</div>

	<div class="column" style="margin: 3em 0 0 0">
		<div class="textLarge"><a name="BuildingTheSourceCode">Building the Source Code</a></div>
		<div class="textSmall" style="margin: 2em 0 0 0">Required build tools:</div>
		<div class="textSmall">
		<ul>
			<li>C++11 compiler</li>
			<li><a class="text" href="https://cmake.org">CMake 3.12</a></li>
			<li><a class="text" href="https://git-scm.com">git</a></li>
			<li><a class="text" href="https://www.nasm.us">NASM</a></li>
		</ul>
		</div>
		<div class="textSmall">Required libraries:</div>
		<div class="textSmall">
		<ul>
			<li><a class="text" href="http://www.opengl.org">OpenGL 4.1</a></li>
		</ul>
		</div>
		<div class="textSmall">Open a command prompt and clone the DJV repository:</div>
		<pre>
> git clone https://github.com/darbyjohnston/DJV.git djv-git</pre>
		<div class="textSmall">Create a new directory for the build and run CMake:</div>
		<pre>
> mkdir djv-git-Debug
> cd djv-git-Debug
> cmake ..\djv-git -DCMAKE_BUILD_TYPE=Debug -DDJV_THIRD_PARTY=TRUE</pre>
		<div class="textSmall">Add the install path to your PATH environment
		variable in the Windows control panel:</div>
		<pre>
$CMAKE_BINARY_DIR\install\bin</pre>
		<div class="textSmall">Then open "DJV.sln" in Visual Studio and build the solution.</div>
		<div class="textSmall" style="margin: .5em 0 0 0">After the build completes run the confidence
		tests by building the RUN_TESTS target.</div>
		<div class="textSmall" style="margin: .5em 0 0 0">You can also create packages for installation
		by building the PACKAGE target.</div>
	</div>

	<div class="column" style="margin: 3em 0 0 0">
		<div class="textLarge"><a name="Packaging">Packaging</a></div>
		<div class="textSmall" style="margin: 2em 0 0 0">Building MSI and ZIP packages:</div>
		<pre>
> cmake ../djv-git -DDJV_THIRD_PARTY_DISABLE_BUILD=TRUE
> make package</pre>
	</div>

</div>

<div class="footer" style="margin: 1em 0 0 0">
Copyright (c) 2004-2019 Darby Johnston
</div>

</body>
