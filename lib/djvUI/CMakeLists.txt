find_package(JPEG)
find_package(PNG)
find_package(TIFF)
find_package(OpenEXR)
find_package(FFmpeg)

set(header
    AboutDialog.h
    AbstractPrefsWidget.h
    AbstractToolButton.h
    ChoiceButton.h
    ChoiceDialog.h
    CineonWidget.h
    ColorDialog.h
    ColorSwatch.h
    ColorWidget.h
    Core.h
    DPXWidget.h
    DebugLogDialog.h
    FileBrowser.h
    FileBrowserCache.h
    FileBrowserModel.h
    FileBrowserModelPrivate.h
    FileBrowserPrefs.h
    FileBrowserPrefsWidget.h
    FileBrowserThumbnailSystem.h
    FileEdit.h
    FloatDisplay.h
    FloatEdit.h
    FloatEditSlider.h
    FloatObject.h
    FloatSlider.h
    HelpPrefsWidget.h
    HelpPrefs.h
    IconLibrary.h
    IFFWidget.h
    ImageView.h
    IndexShortcut.h
    InfoDialog.h
    InputDialog.h
    IntDisplay.h
    IntEdit.h
    IntEditSlider.h
    IntObject.h
    IntSlider.h
    IOPrefs.h
    IOWidget.h
    LUTWidget.h
    MessagesDialog.h
    MultiChoiceDialog.h
    NoticeDialog.h
    OpenGLPrefsWidget.h
    OpenGLPrefs.h
    OpenGLWidget.h
    PPMWidget.h
    PixelMaskWidget.h
    PixelWidget.h
    PlaybackButtons.h
    PlaybackUtil.h
    Prefs.h
    PrefsDialog.h
    PrefsGroupBox.h
    PrefsInline.h
    ProgressDialog.h
    ProxyStyle.h
    QuestionDialog.h
    SGIWidget.h
    SearchBox.h
    SequencePrefsWidget.h
    SequencePrefs.h
    Shortcut.h
    ShortcutsModel.h
    ShortcutsWidget.h
    ShuttleButton.h
    StylePrefs.h
    StylePrefsWidget.h
    TargaWidget.h
    TimePrefsWidget.h
    TimePrefs.h
    ToolButton.h
    UIContext.h
    UI.h
    Vector2fEditWidget.h
    Vector2iEditWidget.h
    WindowUtil.h)
set(mocHeader
    AboutDialog.h
    AbstractPrefsWidget.h
    AbstractToolButton.h
    ChoiceButton.h
    ChoiceDialog.h
    CineonWidget.h
    ColorDialog.h
    ColorSwatch.h
    ColorWidget.h
    DPXWidget.h
    DebugLogDialog.h
    FileBrowser.h
    FileBrowserModel.h
    FileBrowserModelPrivate.h
    FileBrowserPrefs.h
    FileBrowserPrefsWidget.h
    FileBrowserThumbnailSystem.h
    FileEdit.h
    FloatDisplay.h
    FloatEdit.h
    FloatEditSlider.h
    FloatObject.h
    FloatSlider.h
    HelpPrefsWidget.h
    HelpPrefs.h
    IconLibrary.h
    IFFWidget.h
    ImageView.h
    IndexShortcut.h
    InfoDialog.h
    InputDialog.h
    IntDisplay.h
    IntEdit.h
    IntEditSlider.h
    IntObject.h
    IntSlider.h
    IOPrefs.h
    IOWidget.h
    LUTWidget.h
    MessagesDialog.h
    MultiChoiceDialog.h
    OpenGLPrefsWidget.h
    OpenGLPrefs.h
    OpenGLWidget.h
    PPMWidget.h
    PixelMaskWidget.h
    PixelWidget.h
    PlaybackButtons.h
    Prefs.h
    PrefsDialog.h
    PrefsGroupBox.h
    ProgressDialog.h
    ProxyStyle.h
    QuestionDialog.h
    SGIWidget.h
    SearchBox.h
    SequencePrefsWidget.h
    SequencePrefs.h
    ShortcutsModel.h
    ShortcutsWidget.h
    ShuttleButton.h
    StylePrefs.h
    StylePrefsWidget.h
    TargaWidget.h
    TimePrefsWidget.h
    TimePrefs.h
    ToolButton.h
    UIContext.h
    Vector2fEditWidget.h
    Vector2iEditWidget.h)
set(source
    AboutDialog.cpp
    AbstractPrefsWidget.cpp
    AbstractToolButton.cpp
    ChoiceButton.cpp
    ChoiceDialog.cpp
    CineonWidget.cpp
    ColorDialog.cpp
    ColorSwatch.cpp
    ColorWidget.cpp
    DPXWidget.cpp
    DebugLogDialog.cpp
    FileBrowser.cpp
    FileBrowserCache.cpp
    FileBrowserModel.cpp
    FileBrowserModelPrivate.cpp
    FileBrowserPrefs.cpp
    FileBrowserPrefsWidget.cpp
    FileBrowserThumbnailSystem.cpp
    FileEdit.cpp
    FloatDisplay.cpp
    FloatEdit.cpp
    FloatEditSlider.cpp
    FloatObject.cpp
    FloatSlider.cpp
    HelpPrefsWidget.cpp
    HelpPrefs.cpp
    IconLibrary.cpp
    IFFWidget.cpp
    ImageView.cpp
    IndexShortcut.cpp
    InfoDialog.cpp
    InputDialog.cpp
    IntDisplay.cpp
    IntEdit.cpp
    IntEditSlider.cpp
    IntObject.cpp
    IntSlider.cpp
    IOPrefs.cpp
    IOWidget.cpp
    LUTWidget.cpp
    MessagesDialog.cpp
    MultiChoiceDialog.cpp
    NoticeDialog.cpp
    OpenGLPrefsWidget.cpp
    OpenGLPrefs.cpp
    OpenGLWidget.cpp
    PPMWidget.cpp
    PixelMaskWidget.cpp
    PixelWidget.cpp
    PlaybackButtons.cpp
    PlaybackUtil.cpp
    Prefs.cpp
    PrefsDialog.cpp
    PrefsGroupBox.cpp
    ProgressDialog.cpp
    ProxyStyle.cpp
    QuestionDialog.cpp
    SGIWidget.cpp
    SearchBox.cpp
    SequencePrefsWidget.cpp
    SequencePrefs.cpp
    Shortcut.cpp
    ShortcutsModel.cpp
    ShortcutsWidget.cpp
    ShuttleButton.cpp
    StylePrefs.cpp
    StylePrefsWidget.cpp
    TargaWidget.cpp
    TimePrefsWidget.cpp
    TimePrefs.cpp
    ToolButton.cpp
    UIContext.cpp
    Vector2fEditWidget.cpp
    Vector2iEditWidget.cpp
    WindowUtil.cpp)
if(JPEG_FOUND)
    set(header
        ${header}
        JPEGWidget.h)
    set(mocHeader
        ${mocHeader}
        JPEGWidget.h)
    set(source
        ${source}
        JPEGWidget.cpp)
endif()
if(TIFF_FOUND)
    set(header
        ${header}
        TIFFWidget.h)
    set(mocHeader
        ${mocHeader}
        TIFFWidget.h)
    set(source
        ${source}
        TIFFWidget.cpp)
endif()
if(OPENEXR_FOUND)
    set(header
        ${header}
        OpenEXRWidget.h)
    set(mocHeader
        ${mocHeader}
        OpenEXRWidget.h)
    set(source
        ${source}
        OpenEXRWidget.cpp)
endif()
if(FFMPEG_FOUND)
    set(header
        ${header}
        FFmpegWidget.h)
    set(mocHeader
        ${mocHeader}
        FFmpegWidget.h)
    set(source
        ${source}
        FFmpegWidget.cpp)
endif()

QT5_WRAP_CPP(mocSource ${mocHeader})
QT5_ADD_RESOURCES(rccSource djvUI.qrc)
#QT5_CREATE_TRANSLATION(qmSource ${source}
#    djvUI_en_US.ts
#    djvUI_cs_CZ.ts)

include_directories(${OPENGL_INCLUDE_DIRS})
add_library(djvUI ${header} ${source} ${mocSource} ${rccSource} ${qmSource})
target_link_libraries(djvUI djvAV)
set_target_properties(djvUI PROPERTIES FOLDER lib CXX_STANDARD 11)

install(
    FILES ${qmSource}
    DESTINATION ${DJV_INSTALL_TRANSLATIONS})
if(BUILD_SHARED_LIBS)
    install(
        TARGETS djvUI
        RUNTIME DESTINATION ${DJV_INSTALL_BIN}
        LIBRARY DESTINATION ${DJV_INSTALL_LIB}
        ARCHIVE DESTINATION ${DJV_INSTALL_LIB})
endif()

