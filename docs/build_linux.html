---
layout: page
title: Building on Linux
---

<div class="block">
	<p class="header">Building on Linux</p>
    <p class="list"><a class="text" href="#Prerequisites">Prerequisites</a></p>
    <p class="list"><a class="text" href="#Preparation">Preparation</a></p>
    <p class="list"><a class="text" href="#SuperBuild">Super Build</a></p>
    <p class="list"><a class="text" href="#SystemBuild">System Build</a></p>
</div>

<div class="block">
	<p class="header"><a name="Prerequisites">Prerequisites</a></p>
	<p>Check that you have the following prerequisites:</p>
	<ul>
		<li><a class="text" href="http://www.opengl.org">OpenGL</a> (version 4.1 or later)</li>
		<li>C++11 compiler</li>
		<li><a class="text" href="https://cmake.org">CMake</a> (version 3.18 or later)</li>
		<li><a class="text" href="https://git-scm.com">git</a></li>
	</ul>
	<p>To install the requirements use the following commands:</p>
	<pre>
[Debian]

$ sudo apt-get install build-essential git libgl1-mesa-dev xorg-dev libasound2-dev
</pre>
    <pre>
[CentOS]

$ sudo yum install centos-release-scl install devtoolset-7-gcc* rpm-build git mesa-libGL-devel libXrandr-devel libXinerama-devel libXcursor-devel libXi-devel alsa-lib-devel
$ scl enable devtoolset-7 bash
</pre>
    <p>Note that the version of CMake available from your package manager
    may be too old (i.e., Ubuntu 18.04 and CentOS 7); if so download and
    manually build CMake 3.18 or later.</p>
</div>

<div class="block">
	<p class="header"><a name="Preparation">Preparation</a></p>
    <p>Choose a directory to work in, this is where the code will be
    checked out and built. This directory will be referred to as DJV_BUILD
    in the rest of the documentation.</p>
	<p>Open a shell, go to the build directory, and clone the DJV repository:</p>
	<pre>
$ git clone https://github.com/darbyjohnston/DJV.git
</pre>
	<p>Setup environment variables:</p>
	<pre>
[Debug]

$ export DJV_BUILD=$PWD
$ export PATH=$DJV_BUILD/DJV-install-Debug/bin:$PATH
$ export LD_LIBRARY_PATH=$DJV_BUILD/DJV-install-Debug/lib:$LD_LIBRARY_PATH
</pre>
	<pre>
[Release]

$ export DJV_BUILD=$PWD
$ export PATH=$DJV_BUILD/DJV-install-Release/bin:$PATH
$ export LD_LIBRARY_PATH=$DJV_BUILD/DJV-install-Release/lib:$LD_LIBRARY_PATH
</pre>
</div>

<div class="block">
	<p class="header"><a name="SuperBuild">Super Build</a></p>
	<p>This is the recommended way to build DJV, this builds both DJV and the
	neccessary third party dependencies.</p>
	<p>Create a directory for the build and run CMake:</p>
	<pre>
[Debug]

$ mkdir DJV-Debug
$ cd DJV-Debug
$ cmake ../DJV/etc/SuperBuild -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=$DJV_BUILD/DJV-install-Debug -DCMAKE_PREFIX_PATH=$DJV_BUILD/DJV-install-Debug
</pre>
	<pre>
[Release]

$ mkdir DJV-Release
$ cd DJV-Release
$ cmake ../DJV/etc/SuperBuild -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$DJV_BUILD/DJV-install-Release -DCMAKE_PREFIX_PATH=$DJV_BUILD/DJV-install-Release
</pre>
	<p>Start the build using 8 cores:</p>
	<pre>
$ cmake --build . -j 8
</pre>
	<p>Try running the DJV player application:</p>
	<pre>
$ ./DJV/src/DJV-build/build/bin/djv
</pre>
    <p>When developing DJV with a super build you can speed up build times
    by skipping the third party dependencies. Note that you must have
    built the thirty party dependencies first:</p>
    <pre>
$ cd ./DJV/src/DJV-build
$ cmake --build . -j 8
</pre>
</div>

<div class="block">
	<p class="header"><a name="SystemBuild">System Build</a></p>
	<p>This builds DJV using the system provided third party dependencies.</p>
	<p>Create a directory for the build and run CMake:</p>
	<pre>
[Debug]

$ mkdir DJV-Debug
$ cd DJV-Debug
$ cmake ../DJV -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=$DJV_BUILD/DJV-install-Debug -DCMAKE_PREFIX_PATH=$DJV_BUILD/DJV-install-Debug
</pre>
	<pre>
[Release]

$ mkdir DJV-Release
$ cd DJV-Release
$ cmake ../DJV -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$DJV_BUILD/DJV-install-Release -DCMAKE_PREFIX_PATH=$DJV_BUILD/DJV-install-Release
</pre>
	<p>Start the build using 8 cores:</p>
	<pre>
$ cmake --build . -j 8
</pre>
	<p>Try running the confidence tests to make sure everything is working OK:</p>
	<pre>
$ cmake --build . --target test
</pre>
	<p>Try running the DJV player application:</p>
	<pre>
$ ./build/bin/djv
</pre>
</div>

